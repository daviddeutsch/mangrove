<div ng-controller="SourceCtrl" ng-cloak>
	<h2>
		<span ng-hide="item.name || item.id">New Source</span>
		<span ng-show="item.name == '' && item.id">Unnamed Source</span>
		<span ng-show="item.name">{{item.name}}</span>
		<span class="pull-right">
			<button class="btn btn-s btn-success animate"
					ng-click="editmode=true"
					ng-hide="editmode || !item.id">edit</button>
			<button class="btn btn-s btn-warning animate"
					ng-click="editmode=false"
					ng-show="editmode && item.id">done</button>
			<button class="btn btn-s btn-warning animate"
					ng-click="editmode=false;add(item, 'source')"
					ng-show="editmode && !item.id">save</button>
			<button class="btn btn-s btn-danger animate"
					mg-confirm-click="remove(item.id, 'source')"
					ng-hide="editmode || !item.id">remove</button>
			<button class="btn btn-s btn-danger"
					ui-sref="source.list"
					ng-show="editmode && !item.id">cancel</button>
		</span>
	</h2>
	<hr>
	<div ng-hide="editmode">
		<div class="row">
			<div class="col-md-6">
				<p>Server Url: <strong>{{item.url}}</strong></p>
			</div>
			<div class="col-md-6">
			</div>
		</div>
	</div>
	<div ng-show="editmode">
		<form>
			<p>
				<label for="source-name">Name</label>
				<input class="form-control" id="source-name" ng-model="item.name">
			</p>
			<p>
				<label for="source-url">URL</label>
				<input class="form-control" id="source-url" ng-model="item.url">
			</p>
		</form>
	</div>
	<div class="col-md-6 col-md-offset-3">

		<div class="panel animate-calm" ng-class="{'panel-primary':item.status=='', 'panel-success':item.status=='ready', 'panel-warning':item.status!='ready'}">
			<div class="panel-heading">
				<h3 class="panel-title">
					Connection status:
					<span ng-switch="item.status">
						<span ng-switch-default class="animate-calm">
							Not set up yet
						</span>
						<span ng-switch-when="ready" class="animate-calm">
							Ready
						</span>
					</span>
				</h3>
			</div>
			<div class="panel-body">
				<div ng-switch="item.status">
					<div ng-switch-default class="animate-calm text-center">
						<a class="btn btn-xs btn-success animate"
						   ng-click="init();">initialize connection</a>
					</div>
					<div ng-switch-when="ready" class="animate-calm">
						Ready
					</div>
			</div>
		</div>
		</div>
	</div>
</div>
